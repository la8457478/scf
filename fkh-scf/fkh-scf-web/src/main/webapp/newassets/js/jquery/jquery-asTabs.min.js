/*! jQuery asTabs - v0.1.0 - 2014-03-28
* https://github.com/amazingSurge/jquery-asTabs
* Copyright (c) 2014 amazingSurge; Licensed GPL */
(function(t,n,e,s){"use strict";var i=e.asTabs=function(t,n){var s=this;this.element=t,this.$element=e(t);var a=[];e.each(this.$element.data(),function(t,n){var e=RegExp("^asTabs","i");e.test(t)&&(a[t.toLowerCase().replace(e,"")]=n)}),this.options=e.extend(!0,{},i.defaults,n,a),this.namespace=this.options.namespace,this.initialized=!1,this.classes={activeTab:this.namespace+"_active",activePane:this.namespace+"_active",panes_wrap:this.namespace+"-panes",skin:this.namespace+"_"+this.options.skin},this.$tabs=this.$element.children(),this.$panes_wrap=e(this.options.panes_wrap).addClass(this.classes.panes_wrap),this.$panes=this.$panes_wrap.children(),this.$loading=e('<span class="'+this.namespace+'-loading"></span>'),this.size=this.$tabs.length,this.options.skin&&(this.$element.addClass(this.classes.skin),this.$panes_wrap.addClass(this.classes.skin)),this.options.ajax===!0&&(this.ajax=[],e.each(this.$tabs,function(t,n){var i={};i.href=e(n).data("href"),s.ajax.push(i)})),this.init()};i.defaults={namespace:"asTabs",panes_wrap:".panes_wrap",skin:null,initialIndex:0,ajax:!1,cached:!1,history:!1,keyboard:!1,effect:!1,event:"click"},i.prototype={constructor:i,init:function(){var t=this;this.$element.on(this.options.event,"> *",function(n){var s=e(n.target).index();return t.active(s),t.afterActive(),!1}),this.$element.trigger("asTabs::init",this),this.active(this.options.initialIndex),this.initialized=!0,this.$element.trigger("asTabs::ready",this)},active:function(t){this.current!==t&&(this.last=this.current,this.current=t,this.$tabs.eq(t).addClass(this.classes.activeTab).siblings().removeClass(this.classes.activeTab),this.$panes.eq(t).addClass(this.classes.activePane).siblings().removeClass(this.classes.activePane),this.$element.trigger("asTabs::active",this),"function"===e.type(this.options.onActive)&&this.options.onActive(this),this.options.ajax===!0&&this.ajaxLoad(t))},afterActive:function(){this.$element.trigger("asTabs::afterActive",this),"function"===e.type(this.options.onAfterActive)&&this.options.onAfterActive(this)},ajaxLoad:function(t){var n,s=this;(this.options.cached!==!0||this.ajax[t].cached!==!0)&&(this.showLoading(),n=e.ajax({url:this.ajax[t].href}),n.done(function(n){s.ajax[t].cached=!0,s.hideLoading(),s.$panes.eq(t).html(n)}),n.fail(function(){s.hideLoading(),s.$panes.eq(t).html("failed")}))},showLoading:function(){this.$loading.appendTo(this.$panes_wrap)},hideLoading:function(){this.$loading.remove()},getTabs:function(){return this.$tabs},getPanes_wrap:function(){return this.$panes},getCurrentPane:function(){return this.$panes.eq(this.current)},getCurrentTab:function(){return this.$tabs.eq(this.current)},getIndex:function(){return this.current},getSize:function(){return this.size},append:function(t,n){this.add(t,n,this.size)},add:function(t,n,e){this.$tabs.eq(e-1).after(this.$tabs.eq(0).clone().removeClass(this.classes.activeTab).html(t)),this.$panes.eq(e-1).after(this.$panes.eq(0).clone().removeClass(this.classes.activePane).html(n)),this.$tabs=this.$element.children(),this.$panes=this.$panes_wrap.children(),this.size++},next:function(){var t=this.$tabs.length,n=this.current;t-1>n?n++:n=0,this.active(n)},prev:function(){var t=this.$tabs.length,n=this.current;0===n?n=Math.abs(1-t):n-=1,this.active(n)},enable:function(){},disable:function(){},destroy:function(){}},e.fn.asTabs=function(t){if("string"!=typeof t)return this.each(function(){e.data(this,"asTabs")||e.data(this,"asTabs",new i(this,t))});var n=t,a=arguments.length>1?Array.prototype.slice.call(arguments,1):s;if(!/^(getTabs|getPanes_wrap|getCurrentPane|getCurrentTab|getIndex)$/.test(n))return this.each(function(){var t=e.data(this,"asTabs");t&&"function"==typeof t[n]&&t[n].apply(t,a)});var r=this.first().data("asTabs");return r&&"function"==typeof r[n]?r[n].apply(r,a):s}})(window,document,jQuery),function(t,n,e){var s=e(n),i={states:{},refresh:!1,stopHashchangeEvent:!1,on:function(n,s){var i=this;e(t).on(n,function(t){return i.stopHashchangeEvent?!1:(s(t),!1)})},off:function(n){e(t).off(n)},pushState:function(t){var n;for(n in t)this.states[n]=t[n];this.refresh=!1,this.stopHashchangeEvent=!0,setTimeout(e.proxy(this.changeStates,this),0)},changeStates:function(){var n=this,s="";this.refresh!==!0&&(e.each(this.states,function(t,n){s+=t+"="+n+"&"}),t.location.hash=s.substr(0,s.length-1),this.refresh=!0,setTimeout(function(){n.stopHashchangeEvent=!1},0))},getState:function(){var n,s=t.location.hash.replace("#","").replace("!",""),i={};return""===s?{}:(n=s.split("&"),e.each(n,function(t,n){if(n!==!1){var e=n.match("#?(.*)=(.*)");e&&(i[e[1]]=e[2])}}),i)},reset:function(){this.refresh!==!0&&(this.states={},t.location.hash="#/",this.refresh=!0)}};s.on("asTabs::init",function(t,n){if(n.options.history!==!1){var s=function(){var t,s=i.getState(),a=n.$element.attr("id");if(s[a]&&(t=e("#"+a).data("asTabs"))){var r=n.$element.find("#"+s[a]);r.length>=1?t.active(n.$tabs.index(r)):t.active(s[a])}};i.on("hashchange.asTabs",s)}}),s.on("asTabs::afterActive",function(t,n){var e=n.current,s={},a=n.$element.attr("id"),r=n.$tabs.eq(e).attr("id");n.options.history!==!1&&(s[a]=r?r:e,i.pushState(s))}),setTimeout(function(){e(t).trigger("hashchange.asTabs")},0)}(window,document,jQuery),function(t,n,e){var s=e(n),i={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var n=t.keyCode||t.which;return n in i.map&&"function"==typeof i.map[n]?(t.preventDefault(),i.map[n].call(this,t)):undefined},attach:function(t){var n,e;for(n in t)t.hasOwnProperty(n)&&(e=n.toUpperCase(),e in i.keys?i.map[i.keys[e]]=t[n]:i.map[e]=t[n]);i.bound||(i.bound=!0,s.bind("keydown",i.press))},detach:function(){i.bound=!1,i.map={},s.unbind("keydown",i.press)}};s.on("asTabs::init",function(t,n){n.options.keyboard!==!1&&(n.$element.add(n.$panes_wrap).attr("tabindex","0").on("focus",function(){return i.attach({left:e.proxy(n.prev,n),right:e.proxy(n.next,n)}),!1}).on("blur",function(){return i.detach(),!1}),n.$panes.attr("tabindex","0").on("focus",function(){return i.attach({left:e.proxy(n.prev,n),right:e.proxy(n.next,n)}),!1}).on("blur",function(){return i.detach(),!1}))})}(window,document,jQuery),function(t,n,e){var s=e(n),i={options:{$parent:null,$panes:null},animEndEventName:"",isAnimating:!1,current:0,total:0,$parent:"",$panes:"",animEndEventNames:{WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},init:function(t){this.options=e.extend({},this.options,t),this.$panes=this.options.$panes,this.$parent=this.options.$parent,this.inClass="effect_"+this.options.effect,this.outClass=this.revertClass(this.options.effect),this.total=this.options.$panes.length,this.animEndEventName=this.animEndEventNames[this.getTransitionPrefix()],this.$parent.addClass("effect_"+this.options.effect)},next:function(){var t=this.current;return this.isAnimating?!1:(this.isAnimating=!0,this.current<this.total-1?this.current++:this.current=0,this.animate(t,this.current),undefined)},prev:function(){var t=this.current;return this.isAnimating?!1:(this.isAnimating=!0,this.current>0?this.current--:this.current=this.total-1,this.animate(t,this.current),undefined)},animate:function(t,n,e){var s=this,i=!1,a=!1,r=this.$panes.eq(t),o=this.$panes.eq(n);r.removeClass(this.inClass).addClass(this.outClass).on(this.animEndEventName,function(){r.off(s.animEndEventName),i=!0,a&&(jQuery.isFunction(e)&&e(s.$parent,o,r),s.onEndAnimation(r,o))}),o.addClass(this.inClass).on(this.animEndEventName,function(){o.off(s.animEndEventName),a=!0,i&&s.onEndAnimation(r,o)})},onEndAnimation:function(t,n){this.reset(t,n),this.isAnimating=!1},reset:function(t,n){this.$panes.removeClass("effect_last"),t.removeClass(this.outClass),n.removeClass(this.inClass).addClass("et-page-current")},revertClass:function(t){for(var n=t.split(" "),s=n.length,i=["Up","Down","In","Out","Left","Right","Top","Bottom"],a=["Down","Up","Out","In","Right","Left","Bottom","Top"],r="",o="",h=[],c="",u=0;s>u;u++){for(var f=0;i.length>f;f++)o=RegExp(i[f]),o.test(n[u])&&h.push(f);for(var p=0;h.length>p;p++)c=h[p],n[u]=n[u].replace(i[c],c);for(var l=0;h.length>l;l++)c=h[l],n[u]=n[u].replace(c,a[c]);r+=" effect_"+n[u]}return e.trim(r)},getTransitionPrefix:function(){var t=n.body||n.documentElement,e=["Moz","Webkit","Khtml","O","ms"],s=t.style,i="animation";if("string"==typeof s[i])return"animation";i=i.charAt(0).toUpperCase()+i.substr(1);for(var a=0;e.length>a;a++)if("string"==typeof s[e[a]+i])return e[a]+i;return!1}};s.on("asTabs::init",function(t,n){return n.options.effect===!1?!1:(n.effects=e.extend(!0,{},i),n.effects.init({effect:n.options.effect,$parent:n.$panes_wrap,$panes:n.$panes}),undefined)}),s.on("asTabs::active",function(t,n){return n.options.effect===!1||n.initialized===!1?!1:(n.effects.animate(n.last,n.current),undefined)})}(window,document,jQuery);